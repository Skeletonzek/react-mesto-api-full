{"version":3,"sources":["images/mesto.svg","images/profile-img.jpg","images/StatusOk.svg","images/StatusBad.svg","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/EditProfilePopup.js","components/ImagePopup.js","utils/api.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/Register.js","components/Login.js","components/InfoTooltip.js","components/ProtectedRoute.js","utils/auth.js","components/App.js","serviceWorker.js","index.js"],"names":["module","exports","Header","props","currentPath","useLocation","className","src","headerLogo","alt","isLogged","email","to","pathname","onClick","onSignOut","CurrentUserContext","React","createContext","Card","user","useContext","isOwn","owner","_id","isLiked","likes","some","i","cardDeleteButtonClassName","cardLikeButtonClassName","type","onCardDelete","name","link","onCardClick","onCardLike","length","Main","onEditAvatar","avatar","onEditProfile","about","onAddPlace","cards","map","card","key","Footer","EditProfilePopup","useState","setName","description","setDescription","useEffect","isOpen","onSubmit","e","preventDefault","noValidate","onClose","value","onChange","target","id","placeholder","minLength","maxLength","required","ImagePopup","open","BASE_URL","getInitialCards","fetch","headers","localStorage","getItem","then","res","ok","json","Promise","reject","status","data","getUserInfo","EditAvatarPopup","imageSrc","useRef","current","ref","AddPlacePopup","cardName","cardSrc","Register","password","onRegister","Login","onLogin","InfoTooltip","tooltipStatus","statusOk","statusBad","ProtectedRoute","Component","component","loggedIn","App","history","useHistory","isTooltipOpen","setTooltipOpen","setTooltipStatus","isEditProfilePopupOpen","setEditProfilePopupOpen","isAddPlacePopupOpen","setAddPlacePopupOpen","isEditAvatarPopupOpen","setEditAvatarPopupOpen","selectedCard","setSelectedCard","userAvatarDefault","currentUser","setCurrentUser","setLogged","setEmail","loggedStatusYes","handleTooltip","closeAllPopups","jwt","token","method","response","push","catch","err","console","error","api","log","setCards","Provider","body","JSON","stringify","newCard","removeItem","path","newCards","c","filter","register","setItem","authorize","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","message"],"mappings":"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","file":"static/js/main.cade0d05.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/mesto.e889e45f.svg\";","module.exports = __webpack_public_path__ + \"static/media/profile-img.32b3b42c.jpg\";","module.exports = __webpack_public_path__ + \"static/media/StatusOk.e38b395c.svg\";","module.exports = __webpack_public_path__ + \"static/media/StatusBad.4072126c.svg\";","import React from 'react';\r\nimport {useLocation, Link } from 'react-router-dom';\r\nimport headerLogo from '../images/mesto.svg';\r\n\r\nfunction Header(props) {\r\n  const currentPath = useLocation();\r\n\r\n  return (\r\n    <header className=\"header\">\r\n      <img className=\"header__logo\" src={headerLogo} alt=\"Логотип\" />\r\n      <div className=\"header__container\">\r\n        {props.isLogged && <p className=\"header__user\">{props.email}</p>}\r\n        {!props.isLogged && <Link to={currentPath.pathname === `/sign-in` ? `/sign-up` : `/sign-in`} className=\"header__sign\">{currentPath.pathname === `/sign-in` ? `Регистрация` : `Вход`}</Link>}\r\n        {props.isLogged && <Link to=\"/sign-in\" className=\"header__sign\" onClick={props.onSignOut}>Выйти</Link>}\r\n      </div>\r\n    </header>\r\n  )\r\n}\r\n\r\nexport default Header;","import React from 'react';\r\n\r\nexport const CurrentUserContext = React.createContext();","import React from 'react';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nfunction Card(props) {\r\n  const user = React.useContext(CurrentUserContext);\r\n  const isOwn = props.owner === user._id;\r\n  const isLiked = props.likes.some(i => i === user._id);\r\n  const cardDeleteButtonClassName = `place__bin ${isOwn ? ' ' : 'place__bin_hidden'}`;\r\n  const cardLikeButtonClassName = `place__like-button ${isLiked ? 'place__like-button_active' : ' '}`;\r\n\r\n  function handleClick() {\r\n    props.onCardClick(props.name, props.link);\r\n  }\r\n\r\n  \r\n  function handleLikeClick() {\r\n    props.onCardLike(props)\r\n  }\r\n\r\n  \r\n  function handleDeleteClick() {\r\n    props.onCardDelete(props._id)\r\n  }\r\n\r\n  return (\r\n    <article className=\"place\">\r\n      <button className={cardDeleteButtonClassName} type=\"button\" onClick={handleDeleteClick}></button>\r\n      <img className=\"place__photo\" alt={props.name} src={props.link} onClick={handleClick} />\r\n      <h2 className=\"place__title\">{props.name}</h2>\r\n      <div className=\"place__like\">\r\n        <button className={cardLikeButtonClassName} type=\"button\" onClick={handleLikeClick}></button>\r\n        <span className=\"place__like-count\">{props.likes.length}</span>\r\n      </div>\r\n    </article>\r\n  )\r\n}\r\n\r\nexport default Card;","import React from 'react';\r\nimport Card from './Card';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\n\r\nfunction Main(props) {\r\n  const user = React.useContext(CurrentUserContext);\r\n\r\n  \r\n  return (\r\n    <main className=\"content\">\r\n    <section className=\"profile\">\r\n      <button className=\"profile__img-hover\" onClick={props.onEditAvatar}>\r\n        <img className=\"profile__img\" src={user.avatar} alt=\"Аватар\" />\r\n      </button>\r\n      <div className=\"profile-info\">\r\n        <h1 className=\"profile-info__name\">{user.name}</h1>\r\n        <button className=\"profile-info__change\" type=\"button\" onClick={props.onEditProfile}></button>\r\n        <p className=\"profile-info__status\">{user.about}</p>\r\n      </div>\r\n      <button className=\"profile__add\" type=\"button\" onClick={props.onAddPlace}></button>\r\n    </section>\r\n    <section className=\"places\">\r\n      {props.cards.map((card) => (<Card key={card._id} _id={card._id} name={card.name} link={card.link} likes={card.likes} owner={card.owner} \r\n      onCardClick={props.onCardClick} onCardLike={props.onCardLike} onCardDelete={props.onCardDelete} />))}\r\n  </section>\r\n  </main>\r\n  )\r\n}\r\n\r\nexport default Main;","import React from 'react';\r\n\r\nfunction Footer() {\r\n  return (\r\n    <footer className=\"footer\">\r\n      <p className=\"footer__copyright\">&copy; 2020 Mesto Russia</p>\r\n    </footer>\r\n  )\r\n}\r\n\r\nexport default Footer;","import React from 'react';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nfunction EditProfilePopup(props) {\r\n  const user = React.useContext(CurrentUserContext);\r\n  const [name, setName] = React.useState('');\r\n  const [description, setDescription] = React.useState('');\r\n\r\n  React.useEffect(() => {\r\n    setName(user.name);\r\n    setDescription(user.about);\r\n  }, [user]);\r\n\r\n  function handleNameChange(e) {\r\n    setName(e.target.value);\r\n  }\r\n\r\n  function handleDescriptionChange(e) {\r\n    setDescription(e.target.value);\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    props.onSubmit({\r\n      name,\r\n      about: description,\r\n    });\r\n  } \r\n\r\n  return (\r\n    <section className={`popup popup-profile ${props.isOpen ? 'popup_opened' : ''}`}>\r\n      <form className=\"popup__form popup-profile__form\" name=\"profile\" onSubmit={handleSubmit} noValidate>\r\n        <button className=\"popup__close popup-profile__close\" type=\"button\" onClick={props.onClose}></button>\r\n        <h2 className=\"popup__title popup-profile__title\">Редактировать профиль</h2>\r\n        <input className=\"popup__text popup-profile__text\" value={name} onChange={handleNameChange} id=\"name-input\" type=\"text\" name=\"name\" placeholder=\"Имя\" minLength=\"2\" maxLength=\"40\" required />\r\n        <span className=\"popup__error\" id=\"name-input-error\"></span>\r\n        <input className=\"popup__text popup-profile__text\" value={description} onChange={handleDescriptionChange} id=\"status-input\" type=\"text\" name=\"about\" placeholder=\"О себе\" minLength=\"2\" maxLength=\"200\" required />\r\n        <span className=\"popup__error\" id=\"status-input-error\"></span>\r\n        <button className=\"popup__submit popup-profile__submit\" type=\"submit\">Сохранить</button>\r\n      </form>\r\n    </section>\r\n  )\r\n}\r\n\r\nexport default EditProfilePopup;","import React from 'react';\r\n\r\nfunction ImagePopup(props) {\r\n\r\n  return (\r\n    <section className={`popup popup-pic ${props.card.open ? 'popup_opened' : ''}`}>\r\n    <figure className=\"popup-pic__figure\">\r\n      <button className=\"popup__close popup-pic__close\" type=\"button\" onClick={props.onClose}></button>\r\n      <img className=\"popup-pic__img\" alt={props.card.name} src={props.card.link} />\r\n      <figcaption className=\"popup-pic__title\">{props.card.name}</figcaption>\r\n    </figure>\r\n  </section>\r\n  )\r\n}\r\n\r\nexport default ImagePopup;","export const BASE_URL = 'https://ilyazhulanov.students.nomoreparties.xyz';\r\n\r\nexport const getInitialCards = () => {\r\n  return fetch(`${BASE_URL}/cards`, {\r\n    headers: {\r\n      'Authorization': `Bearer ${localStorage.getItem('jwt')}`,\r\n      'Content-Type': 'application/json'\r\n    }\r\n  }).then((res) => {\r\n    if (res.ok) {\r\n      return res.json();\r\n    }\r\n    return Promise.reject(`Ошибка: ${res.status}`);\r\n  }).then((res) => {\r\n    return res.data;\r\n  })\r\n}\r\n\r\nexport const getUserInfo = () => {\r\n  return fetch(`${BASE_URL}/users/me`, {\r\n    headers: {\r\n      'Authorization': `Bearer ${localStorage.getItem('jwt')}`,\r\n      'Content-Type': 'application/json'\r\n    }\r\n  }).then((res) => {\r\n    if (res.ok) {\r\n      return res.json();\r\n    }\r\n    return Promise.reject(`Ошибка: ${res.status}`);\r\n  }).then((res) => {\r\n    return res.data;\r\n  })\r\n}\r\n\r\nexport const sendUserInfo = (data) => {\r\n  console.log(localStorage.getItem('jwt'));\r\n  return fetch(`${BASE_URL}/users/me`, {\r\n    method: 'PATCH',\r\n    headers: {\r\n      'Authorization': `Bearer ${localStorage.getItem('jwt')}`,\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify({\r\n      name: data.name,\r\n      about: data.about\r\n    })\r\n  }).then((res) => {\r\n    if (res.ok) {\r\n      return res.json();\r\n    }\r\n    return Promise.reject(`Ошибка: ${res.status}`);\r\n  }).then((res) => {\r\n    return res.data;\r\n  })\r\n}\r\n\r\nexport const postNewCard = (data) => {\r\n  return fetch(`${BASE_URL}/cards`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Authorization': `Bearer ${localStorage.getItem('jwt')}`,\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify({\r\n      name: data.name,\r\n      link: data.link\r\n    })\r\n  }).then((res) => {\r\n    if (res.ok) {\r\n      return res.json();\r\n    }\r\n    return Promise.reject(`Ошибка: ${res.status}`);\r\n  }).then((res) => {\r\n    return res.data;\r\n  })\r\n}\r\n\r\nexport const deleteCard = (id) => {\r\n  return fetch(`${BASE_URL}/cards/${id}`, {\r\n    method: 'DELETE',\r\n    headers: {\r\n      'Authorization': `Bearer ${localStorage.getItem('jwt')}`,\r\n      'Content-Type': 'application/json'\r\n    }\r\n  }).then((res) => {\r\n    if (res.ok) {\r\n      return res.json();\r\n    }\r\n    return Promise.reject(`Ошибка: ${res.status}`);\r\n  }).then((res) => {\r\n    return res.data;\r\n  })\r\n}\r\n\r\nexport const changeLikeCardStatus = (id, isLiked) => {\r\n  return fetch(`${BASE_URL}/cards/${id}/likes`, {\r\n    method: `${isLiked ? 'DELETE' : 'PUT'}`,\r\n    headers: {\r\n      'Authorization': `Bearer ${localStorage.getItem('jwt')}`,\r\n      'Content-Type': 'application/json'\r\n    }\r\n  }).then((res) => {\r\n    if (res.ok) {\r\n      return res.json();\r\n    }\r\n    return Promise.reject(`Ошибка: ${res.status}`);\r\n  }).then((res) => {\r\n    return res.data;\r\n  })\r\n}\r\n\r\nexport const changeAvatar = (data) => {\r\n  return fetch(`${BASE_URL}/users/me/avatar`, {\r\n    method: 'PATCH',\r\n    headers: {\r\n      'Authorization': `Bearer ${localStorage.getItem('jwt')}`,\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify({\r\n      avatar: data.avatar\r\n    })\r\n  }).then((res) => {\r\n    if (res.ok) {\r\n      return res.json();\r\n    }\r\n    return Promise.reject(`Ошибка: ${res.status}`);\r\n  }).then((res) => {\r\n    return res.data;\r\n  })\r\n}","import React from 'react';\r\n\r\nfunction EditAvatarPopup(props) {\r\n  const imageSrc = React.useRef();\r\n \r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n  \r\n    props.onSubmit({\r\n      avatar: imageSrc.current.value\r\n    });\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    if(props.isOpen) {\r\n      imageSrc.current.value = \"\";\r\n    }\r\n  }, [props.isOpen])\r\n  \r\n  return (\r\n    <section className={`popup popup-avatar ${props.isOpen ? 'popup_opened' : ''}`}>\r\n      <form className=\"popup__form popup-avatar__form\" name=\"avatar\" onSubmit={handleSubmit} noValidate>\r\n        <button className=\"popup__close popup-avatar__close\" type=\"button\" onClick={props.onClose}></button>\r\n        <h2 className=\"popup__title popup-avatar__title\">Обновить аватар</h2>\r\n        <input ref={imageSrc} className=\"popup__text popup-avatar__text\" id=\"link-input\" type=\"url\" name=\"avatar\" placeholder=\"Ссылка на картинку\" required />\r\n        <span className=\"popup__error\" id=\"link-input-error\"></span>\r\n        <button className=\"popup__submit popup-avatar__submit\" type=\"submit\">Сохранить</button>\r\n      </form>\r\n    </section>\r\n  )\r\n}\r\n\r\nexport default EditAvatarPopup;","import React from 'react';\r\n\r\nfunction AddPlacePopup(props) {\r\n  const cardName = React.useRef();\r\n  const cardSrc = React.useRef();\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n  \r\n    props.onSubmit({\r\n      name: cardName.current.value,\r\n      link: cardSrc.current.value\r\n    });\r\n    \r\n  }\r\n\r\n  React.useEffect(() => {\r\n    if(props.isOpen) {\r\n      cardName.current.value = \"\";\r\n      cardSrc.current.value = \"\";\r\n    }\r\n  }, [props.isOpen])\r\n\r\n  return (\r\n    <section className={`popup popup-card ${props.isOpen ? 'popup_opened' : ''}`}>\r\n      <form className=\"popup__form popup-card__form\" name=\"card\" onSubmit={handleSubmit} noValidate>\r\n        <button className=\"popup__close popup-card__close\" type=\"button\" onClick={props.onClose}></button>\r\n        <h2 className=\"popup__title popup-card__title\">Новое место</h2>\r\n        <input ref={cardName} className=\"popup__text popup-card__text\" id=\"title-input\" type=\"text\" name=\"name\" placeholder=\"Название\" minLength=\"1\" maxLength=\"30\" required />\r\n        <span className=\"popup__error\" id=\"title-input-error\"></span>\r\n        <input ref={cardSrc} className=\"popup__text popup-card__text\" id=\"link-input\" type=\"url\" name=\"link\" placeholder=\"Ссылка на картинку\" required />\r\n        <span className=\"popup__error\" id=\"link-input-error\"></span>\r\n        <button className=\"popup__submit popup-card__submit\" type=\"submit\">Создать</button>\r\n      </form>\r\n    </section>\r\n  )\r\n}\r\n\r\nexport default AddPlacePopup;","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nfunction Register(props) {\r\n  const email = React.useRef();\r\n  const password = React.useRef();\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    props.onRegister(password.current.value, email.current.value);\r\n  }\r\n  \r\n  return (\r\n    <section className=\"sign sign-up\">\r\n      <form className=\"sign__form sign-up__form\" name=\"sign-up\" onSubmit={handleSubmit} noValidate>\r\n        <h2 className=\"sign__title sign-up__title\">Регистрация</h2>\r\n        <input ref={email} className=\"sign__text sign-up__text\"  id=\"email-input\" type=\"email\" name=\"email\" placeholder=\"Email\" minLength=\"2\" maxLength=\"40\" required />\r\n        <input ref={password} className=\"sign__text sign-up__text\" id=\"password-input\" type=\"password\" name=\"password\" placeholder=\"Пароль\" minLength=\"2\" maxLength=\"200\" required />\r\n        <button className=\"sign__submit sign-up__submit\" type=\"submit\">Зарегистрироваться</button>\r\n        <p className=\"sign-up__alrdy-user\">Уже зарегестрированы?&nbsp;\r\n          <Link to=\"/sign-in\" className=\"sign-up__enter\">Войти</Link>\r\n        </p>\r\n      </form>\r\n    </section>\r\n  )\r\n}\r\n\r\nexport default Register;","import React from 'react';\r\n\r\nfunction Login(props) {\r\n  const email = React.useRef();\r\n  const password = React.useRef();\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    props.onLogin(password.current.value, email.current.value);\r\n  }\r\n\r\n  return (\r\n    <section className=\"sign sign-in\">\r\n      <form className=\"sign__form sign-in__form\" name=\"sign-in\" onSubmit={handleSubmit} noValidate>\r\n        <h2 className=\"sign__title sign-in__title\">Вход</h2>\r\n        <input ref={email} className=\"sign__text sign-in__text\"  id=\"email-input\" type=\"email\" name=\"email\" placeholder=\"Email\" minLength=\"2\" maxLength=\"40\" required />\r\n        <input ref={password} className=\"sign__text sign-in__text\" id=\"password-input\" type=\"password\" name=\"password\" placeholder=\"Пароль\" minLength=\"2\" maxLength=\"200\" required />\r\n        <button className=\"sign__submit sign-in__submit\" type=\"submit\">Войти</button>\r\n      </form>\r\n    </section>\r\n  )\r\n}\r\n\r\nexport default Login;","import React from 'react';\r\nimport statusOk from '../images/StatusOk.svg';\r\nimport statusBad from '../images/StatusBad.svg'\r\n\r\nfunction InfoTooltip(props) {\r\n\r\n  return (\r\n    <section className={`popup popup-tooltip ${props.isOpen ? 'popup_opened' : ''}`}>\r\n    <div className=\"popup__form popup-tooltip__form\">\r\n      <button className=\"popup__close popup-tooltip__close\" type=\"button\" onClick={props.onClose}></button>\r\n      <img className=\"popup-tooltip__status-img\" alt=\"результат\" src={props.tooltipStatus ? statusOk : statusBad}></img>\r\n      <p className =\"popup-tooltip__status-text\">{props.tooltipStatus ? 'Вы успешно зарегистрировались!': 'Что-то пошло не так! Попробуйте ещё раз.'}</p>\r\n    </div>\r\n  </section>\r\n  )\r\n}\r\n\r\nexport default InfoTooltip;","import React from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\n\r\nconst ProtectedRoute = ({ component: Component, ...props  }) => {\r\n  return (\r\n    <Route>\r\n      {\r\n        () => props.loggedIn ? <Component {...props} /> : <Redirect to=\"/sign-in\" />\r\n      }\r\n    </Route>\r\n)}\r\n\r\nexport default ProtectedRoute;","export const BASE_URL = 'https://ilyazhulanov.students.nomoreparties.xyz';\r\n\r\nexport const register = (password, email) => {\r\n  return fetch(`${BASE_URL}/signup`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify({\r\n      password,\r\n      email})\r\n  })\r\n  .then((response) => {\r\n    if (response.ok) {\r\n      return response.json()\r\n    }\r\n    return Promise.reject(response.status);\r\n  })\r\n  .then((res) => {\r\n    return res;\r\n  })\r\n};\r\n\r\nexport const authorize = (password, email) => {\r\n  return fetch(`${BASE_URL}/signin`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify({\r\n      password,\r\n      email})\r\n  })\r\n  .then((response) => {\r\n    if (response.ok) {\r\n      return response.json()\r\n    }\r\n    return Promise.reject(response.status);\r\n  })\r\n  .then((data) => {\r\n    if (data.token){\r\n      localStorage.setItem('jwt', data.token);\r\n      return data;\r\n    }\r\n  })\r\n};\r\n\r\nexport const checkToken = (token) => {\r\n  return fetch(`${BASE_URL}/users/me`, {\r\n    method: 'GET',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      'Authorization': `Bearer ${token}`,\r\n    }\r\n  })\r\n  .then((response) => {\r\n    if (response.ok) {\r\n      return response.json()\r\n    }\r\n    return Promise.reject(response.status);\r\n  })\r\n  .then(data => data)\r\n};","import React from 'react';\nimport { Route, useHistory } from 'react-router-dom';\nimport Header from './Header';\nimport Main from './Main';\nimport Footer from './Footer';\nimport EditProfilePopup from './EditProfilePopup';\nimport ImagePopup from './ImagePopup';\nimport * as api from '../utils/api';\nimport userAvatarDefault from '../images/profile-img.jpg';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport AddPlacePopup from './AddPlacePopup';\nimport Register from './Register';\nimport Login from './Login';\nimport InfoTooltip from './InfoTooltip';\nimport ProtectedRoute from './ProtectedRoute';\nimport { checkToken } from '../utils/auth';\nimport { register } from '../utils/auth';\nimport { authorize } from '../utils/auth';\n\nfunction App() {\n  const history = useHistory();\n  const [isTooltipOpen, setTooltipOpen] = React.useState(false);\n  const [tooltipStatus, setTooltipStatus] = React.useState(true)\n  const [isEditProfilePopupOpen, setEditProfilePopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setAddPlacePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setEditAvatarPopupOpen] = React.useState(false);\n  const [selectedCard, setSelectedCard] = React.useState({ name: null, link: null, open: false });\n  const [currentUser, setCurrentUser] = React.useState({ name: 'Жак-Ив Кусто', about: 'Исследователь океана', avatar: userAvatarDefault });\n  const [loggedIn, setLogged] = React.useState(false);\n  const [email, setEmail] = React.useState('');\n\n  React.useEffect(() => {\n    if (localStorage.getItem('jwt')) {\n      const jwt = localStorage.getItem('jwt');\n      checkToken(jwt)\n        .then((res) => {\n          loggedStatusYes(res.data.email);\n          history.push('/');\n        })\n        .catch((err) => {\n          console.error(`${err} - Переданный токен некорректен`);\n        })\n    }\n    api.getUserInfo()\n      .then((res) => {\n        setCurrentUser(res);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }, []);\n  \n  function loggedStatusYes(email) {\n    setLogged(true);\n    setEmail(email);\n  }\n\n  function loggedStatusNo() {\n    setLogged(false);\n  }\n\n  function handleEditAvatarClick() {\n    setEditAvatarPopupOpen(true);\n  }\n\n  function handleEditProfileClick() {\n    setEditProfilePopupOpen(true);\n  }\n\n  function handleAddPlaceClick() {\n    setAddPlacePopupOpen(true);\n  }\n  \n  function handleTooltip(status) {\n    setTooltipOpen(true);\n    setTooltipStatus(status);\n  }\n\n  function handleTooltipClose() {\n    setTooltipOpen(false);\n    if (tooltipStatus) {\n      history.push('/sign-in');\n    }\n  }\n\n  function closeAllPopups() {\n    setEditAvatarPopupOpen(false);\n    setAddPlacePopupOpen(false);\n    setEditProfilePopupOpen(false);    \n    setSelectedCard({ ...selectedCard, open: false });\n  }\n\n  function handleCardClick(name, link) {\n    setSelectedCard({ name, link, open: true });\n  }\n\n  function handleUpdateUser(user) {\n    api.sendUserInfo(user)\n      .then(() => {\n        setCurrentUser({ ...currentUser, name: user.name, about: user.about });\n        closeAllPopups();\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n  function handleUpdateAvatar(avatar) {\n    api.changeAvatar(avatar)\n      .then(() => {\n        setCurrentUser({ ...currentUser, avatar: avatar.avatar });\n        closeAllPopups();\n      })\n      .catch((err) => {\n        console.log(err);\n      })\n  }\n\n  const [cards, setCards] = React.useState([]);\n\n  React.useEffect(() => {\n\n    api.getInitialCards()\n      .then((res) => {\n        setCards(res);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }, []);\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(i => i === currentUser._id);\n\n    api.changeLikeCardStatus(card._id, isLiked)\n      .then((newCard) => {\n        const newCards = cards.map((c) => c._id === card._id ? newCard : c);\n        setCards(newCards);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n  function handleCardDelete(id) {\n    api.deleteCard(id).then(() => {\n      \n      const newCards = cards.filter((c) => c._id !== id);\n      setCards(newCards);\n    })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n  function handleAddPlaceSubmit(card) {\n    api.postNewCard(card).then((newCard) => {\n      setCards([newCard, ...cards]);\n      closeAllPopups();\n    })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n  function handleRegister(password, email) {\n    register(password, email)\n    .then((res) => {\n      if (res) {\n        handleTooltip(true);          \n      }\n    })\n    .catch((err) => {\n      handleTooltip(false); \n      console.error(`${err} - некорректно заполнено одно из полей`); \n    })\n  }\n\n  function handleLogin(password, email) {\n    authorize(password, email)\n    .then((res) => {\n      if (res) {\n        loggedStatusYes(email);\n        api.getInitialCards()\n        .then((res) => {\n          setCards(res);\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n        api.getUserInfo()\n        .then((res) => {\n          setCurrentUser(res);\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n        history.push('/');\n      }\n    })\n    .catch((err) => {\n      handleTooltip(false);\n      if (err === 400) {\n        console.error(`${err} - не передано одно из полей`);\n      }\n      else {\n        console.error(`${err} - пользователь с email не найден`);\n      }\n    })\n  }\n\n  function handleSignOut() {\n    console.log(localStorage.getItem('jwt'))\n    localStorage.removeItem('jwt');\n    loggedStatusNo();\n  }\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"page\">\n        <EditProfilePopup isOpen={isEditProfilePopupOpen} onClose={closeAllPopups} onSubmit={handleUpdateUser} />\n        <AddPlacePopup isOpen={isAddPlacePopupOpen} onClose={closeAllPopups} onSubmit={handleAddPlaceSubmit} />\n        <EditAvatarPopup isOpen={isEditAvatarPopupOpen} onClose={closeAllPopups} onSubmit={handleUpdateAvatar} />\n        <ImagePopup card={selectedCard} onClose={closeAllPopups} />\n        <InfoTooltip isOpen={isTooltipOpen} onClose={handleTooltipClose} tooltipStatus={tooltipStatus} />\n        <Header isLogged={loggedIn} email={email} onSignOut={handleSignOut}/>\n        <ProtectedRoute path=\"/\" loggedIn={loggedIn} component={Main} cards={cards} onCardLike={handleCardLike} onCardDelete={handleCardDelete} onEditProfile={handleEditProfileClick} onAddPlace={handleAddPlaceClick} onEditAvatar={handleEditAvatarClick} onCardClick={handleCardClick} />\n        <Route path=\"/sign-up\"> \n          <Register onRegister={handleRegister} />\n        </Route>\n        <Route path=\"/sign-in\">\n          <Login onLogin={handleLogin} />\n        </Route>\n        <Footer />\n      </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport * as serviceWorker from './serviceWorker';\nimport { BrowserRouter } from 'react-router-dom';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}